@page
@model IndexModel
@{
    ViewData["Title"] = "Home page";
}

<script src="https://unpkg.com/@@aspnet/signalr@@1.0.0-preview2-final/dist/browser/signalr.js"></script>
<script>
    var connection = new signalR.HubConnection("/chat?access_token=xeyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6ImFudGhvbnlAYW50aG9ueWNodS5jYSIsImV4cCI6MTUyNTI0NTc2OCwiaXNzIjoiU2lnbmFsUlRlc3RTZXJ2ZXIiLCJhdWQiOiJTaWduYWxSVGVzdHMifQ.StEDyjQb281s26_evAuBA_459IShr9pYDVJSXBqei80")
    connection.on('newMessage', (sender, message) => console.log(`${sender}: ${message}`))
    connection.on('userJoined', username => console.log(`${username} joined`))
    connection.on('userLeft', username => console.log(`${username} left`))
    connection.start()
        .then(() => console.log('connected!'))
        .catch(console.error)
</script>